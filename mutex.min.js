var Mutex=function(a){this.lifo=a||!1,this.locked=!1,this.waitingQueue=[]};Mutex.prototype.lock=function(a){this.locked?this.waitingQueue.push(a):(this.locked=!0,setTimeout(a,0))},Mutex.prototype.unlock=function(){var a;this.waitingQueue.length?(a=this.lifo?this.waitingQueue.pop():this.waitingQueue.shift(),setTimeout(a,0)):this.locked=!1};